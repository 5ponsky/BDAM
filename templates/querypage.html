<!DOCTYPE html>
<html>
  <head>
  <link rel="stylesheet" type = "text/css" href="{{ url_for('static', filename='styles/querypage.css') }}">
  <link href='http://fonts.googleapis.com/css?family=Ubuntu:bold' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Vollkorn' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  </head>
  <title>Tweet Finder</title>
  <body bgcolor="#2E94D9" onload="query()">
    <a style="color: black;" href="/dashboard/">Goto hashtag dashboard</a>
      <div id = "whiteScreen">
        <div id="outputTitle"></div>
        <div id="output"></div>

        <!-- simple footer text -->
        <p id = "footer">Built by Liam Dillingham, Garrett Graham</p>
      </div>
  </body>

  <script>
    function query() {
      var dirtyString = '{{data}}';
      var sanitized = dirtyString.replace(/&#39;/g, "\"");
      console.log('{{data}}')
      var dict = JSON.parse(sanitized);
      console.log(dict);
      document.getElementById("outputTitle").innerHTML = ("Publisher  |  Number of Tweets<br>");
      for(key in dict) {
        href = "/results/" + '{{hashtag}}' + "/" + key + "/tweets/";
        document.getElementById("output").innerHTML += ("<br>" + "<a href=\"" + href + "\">" + key + "</a>   " + dict[key]);
      }
    }
  </script>
</html>
